<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fund Holding List</title>
</head>
<body>
    <h1>Fund Holding List - {{ etf_code }}</h1>

    <!-- 持股數量表格 -->
    <h2>持股數量</h2>
    <table border="1">
        <thead>
            <tr>
                <th>Date</th>
                {% for stock_code, stock_info in etf_data.items() %}
                    {% if stock_code != '日期' and stock_code != 'ok' %}
                        <th>{{ stock_code }}</th>
                    {% endif %}
                {% endfor %}
            </tr>
        </thead>
        <tbody>
            {% for i in range(etf_data['日期']|length) %}
                <tr>
                    <td>{{ etf_data['日期'][i] }}</td>
                    {% for stock_code, stock_info in etf_data.items() %}
                        {% if stock_code != '日期' and stock_code != 'ok' %}
                            <td>
                                {% if etf_data[stock_code]['持股數量'][i] %}
                                    {{ etf_data[stock_code]['持股數量'][i] }}
                                {% else %}
                                    0
                                {% endif %}
                            </td>
                        {% endif %}
                    {% endfor %}
                </tr>
            {% endfor %}
        </tbody>
    </table>

    <!-- 市值表格 -->
    <h2>市值</h2>
    <table border="1">
        <thead>
            <tr>
                <th>Date</th>
                {% for stock_code, stock_info in etf_data.items() %}
                    {% if stock_code != '日期' and stock_code != 'ok' %}
                        <th>{{ stock_code }}</th>
                    {% endif %}
                {% endfor %}
            </tr>
        </thead>
        <tbody>
            {% for i in range(etf_data['日期']|length) %}
                <tr>
                    <td>{{ etf_data['日期'][i] }}</td>
                    {% for stock_code, stock_info in etf_data.items() %}
                        {% if stock_code != '日期' and stock_code != 'ok' %}
                            <td>
                                {% if etf_data[stock_code]['市值'][i] %}
                                    {{ etf_data[stock_code]['市值'][i] }}
                                {% else %}
                                    0
                                {% endif %}
                            </td>
                        {% endif %}
                    {% endfor %}
                </tr>
            {% endfor %}
        </tbody>
    </table>

    <!-- 佔淨值比例表格 -->
    <h2>佔淨值比例</h2>
    <table border="1">
        <thead>
            <tr>
                <th>Date</th>
                {% for stock_code, stock_info in etf_data.items() %}
                    {% if stock_code != '日期' and stock_code != 'ok' %}
                        <th>{{ stock_code }}</th>
                    {% endif %}
                {% endfor %}
            </tr>
        </thead>
        <tbody>
            {% for i in range(etf_data['日期']|length) %}
                <tr>
                    <td>{{ etf_data['日期'][i] }}</td>
                    {% for stock_code, stock_info in etf_data.items() %}
                        {% if stock_code != '日期' and stock_code != 'ok' %}
                            <td>
                                {% if etf_data[stock_code]['佔淨值比例'][i] %}
                                    {{ etf_data[stock_code]['佔淨值比例'][i] }}
                                {% else %}
                                    0
                                {% endif %}
                            </td>
                        {% endif %}
                    {% endfor %}
                </tr>
            {% endfor %}
        </tbody>
    </table>
</body>
</html>